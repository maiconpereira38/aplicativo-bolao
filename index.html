<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Bol√£o Premiado - Elite</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --primary: #22c55e;
      --bg: #0f172a;
      --card: #020617;
      --text: #e5e7eb;
      --gold: #f59e0b;
    }
    body { font-family: Arial, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 15px; }
    #telaAcesso, #telaRegulamento, #telaJogo { display: none; }
    .tabs { display: flex; gap: 10px; margin-bottom: 20px; }
    .tab-btn { flex: 1; padding: 10px; border: none; background: #1e293b; color: #94a3b8; border-radius: 8px; cursor: pointer; font-weight: bold; }
    .tab-btn.active { background: var(--primary); color: black; }
    .form-group { margin-bottom: 12px; }
    label { display: block; font-size: 0.8em; margin-bottom: 4px; color: #94a3b8; }
    input, select { width: 100%; padding: 10px; border-radius: 6px; border: 1px solid #1e293b; background: #1e293b; color: white; box-sizing: border-box; }
    .btn-principal { background: var(--primary); color: black; border: none; padding: 12px; width: 100%; border-radius: 8px; font-weight: bold; cursor: pointer; }
    .lista { display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px; margin-top: 15px; }
    .time { background: var(--card); border: 1px solid #1e293b; padding: 6px 2px; border-radius: 6px; text-align: center; }
    .time h3 { margin: 0; font-size: 0.65em; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .time p { margin: 2px 0; font-size: 0.55em; color: #94a3b8; }
    .time p strong { color: var(--gold); }
    .time button { background: var(--primary); border: none; padding: 5px; width: 90%; border-radius: 4px; font-weight: bold; font-size: 0.65em; cursor: pointer; margin-top: 4px; }
    .reg-box { background: var(--card); padding: 15px; border-radius: 10px; font-size: 0.85em; line-height: 1.4; border: 1px solid #1e293b; }
    header { text-align: center; margin-bottom: 15px; }
    header h1 { font-size: 1.3em; color: var(--primary); cursor: pointer; }
    .contato { text-align: center; margin-bottom: 10px; }
    .contato a { background: #229ED9; color: white; padding: 8px 12px; border-radius: 6px; text-decoration: none; font-size: 11px; font-weight: bold; }
    .btn-afiliado { background: #f59e0b; color: black; font-size: 10px; padding: 8px; border-radius: 6px; border: none; font-weight: bold; width: 100%; margin-top: 10px; cursor: pointer; }
  </style>
</head>
<body>

  <div id="telaAcesso">
    <header><h1>ARENA VIP</h1></header>
    <div class="tabs">
        <button id="btnTabLogin" class="tab-btn active" onclick="switchTab('login')">LOGIN</button>
        <button id="btnTabReg" class="tab-btn" onclick="switchTab('reg')">CADASTRO</button>
    </div>
    <div id="boxLogin">
        <div class="form-group"><label>E-mail Cadastrado</label><input type="email" id="loginEmail"></div>
        <button class="btn-principal" onclick="realizarLogin()">ENTRAR</button>
    </div>
    <div id="boxReg" style="display:none;">
        <div class="form-group"><label>Nome</label><input type="text" id="regNome"></div>
        <div class="form-group"><label>Telefone</label><input type="tel" id="regTel"></div>
        <div class="form-group"><label>Pa√≠s</label><select id="regPais"><option>Brasil</option><option>Portugal</option><option>Outros</option></select></div>
        <div class="form-group"><label>E-mail</label><input type="email" id="regEmail"></div>
        <button class="btn-principal" onclick="salvarCadastro()">CRIAR CONTA</button>
    </div>
  </div>

  <div id="telaRegulamento">
    <header><h1>REGULAMENTO</h1></header>
    <div class="reg-box">
      <p>1. Temporada Mensal de <strong>30 dias</strong>.</p>
      <p>2. Cota: <strong>R$ 20,00</strong>.</p>
      <p>3. Cada indica√ß√£o vale <strong>300 Pontos</strong>.</p>
      <p>4. Pagamento via PIX manual.</p>
    </div>
    <button class="btn-principal" style="margin-top:15px" onclick="irParaJogo()">CONCORDO E QUERO JOGAR</button>
  </div>

  <div id="telaJogo">
    <header><h1 onclick="modoAdmin()">‚öΩ BOL√ÉO PREMIADO</h1></header>
    <div class="contato"><a href="https://t.me/SEU_USUARIO" target="_blank">‚úàÔ∏è Confirmar Pagamento</a></div>
    
    <div style="text-align:center; font-size: 0.8em; margin-bottom: 10px; background: #1e293b; padding: 10px; border-radius: 8px;">
      Ol√°, <span id="nomeUser" style="color:var(--primary)"></span>!<br>
      Saldo: <span id="saldoUser" style="color:var(--gold); font-weight:bold;">0</span> pts
      <button class="btn-afiliado" onclick="gerarLinkAfiliado()">üîó GERAR LINK DE INDICA√á√ÉO (+300 pts)</button>
    </div>

    <div class="lista" id="listaTimes"></div>
    <button class="btn-principal" style="background:#1e293b; color:white; margin-top:20px; font-size:10px; padding:5px;" onclick="logout()">SAIR DA CONTA</button>
  </div>

<script>
  let times = [
    { nome: "Time 01", cotas: 77, premio: 5000 }, { nome: "Time 02", cotas: 77, premio: 4800 },
    { nome: "Time 03", cotas: 77, premio: 4600 }, { nome: "Time 04", cotas: 77, premio: 4500 },
    { nome: "Time 05", cotas: 77, premio: 4400 }, { nome: "Time 06", cotas: 77, premio: 4300 },
    { nome: "Time 07", cotas: 77, premio: 4700 }, { nome: "Time 08", cotas: 77, premio: 4200 },
    { nome: "Time 09", cotas: 77, premio: 4000 }, { nome: "Time 10", cotas: 77, premio: 4100 },
    { nome: "Time 11", cotas: 77, premio: 4050 }, { nome: "Time 12", cotas: 77, premio: 3950 },
    { nome: "Time 13", cotas: 77, premio: 3900 }, { nome: "Time 14", cotas: 77, premio: 3850 },
    { nome: "Time 15", cotas: 77, premio: 3800 }, { nome: "Time 16", cotas: 77, premio: 3750 },
    { nome: "Time 17", cotas: 77, premio: 3700 }, { nome: "Time 18", cotas: 77, premio: 3650 },
    { nome: "Time 19", cotas: 77, premio: 3600 }, { nome: "Time 20", cotas: 77, premio: 3500 },
    { nome: "Time 21", cotas: 77, premio: 3000 }, { nome: "Time 22", cotas: 77, premio: 3000 },
    { nome: "Time 23", cotas: 77, premio: 3000 }, { nome: "Time 24", cotas: 77, premio: 3000 },
    { nome: "Time 25", cotas: 77, premio: 3000 }, { nome: "Time 26", cotas: 77, premio: 3000 },
    { nome: "Time 27", cotas: 77, premio: 3000 }, { nome: "Time 28", cotas: 77, premio: 3000 },
    { nome: "Time 29", cotas: 77, premio: 3000 }, { nome: "Time 30", cotas: 77, premio: 3000 }
  ];

  let saldo = parseInt(localStorage.getItem("saldo_pontos")) || 0;

  function switchTab(tab) {
    if(tab === 'login') {
        document.getElementById("boxLogin").style.display = "block";
        document.getElementById("boxReg").style.display = "none";
        document.getElementById("btnTabLogin").classList.add("active");
        document.getElementById("btnTabReg").classList.remove("active");
    } else {
        document.getElementById("boxLogin").style.display = "none";
        document.getElementById("boxReg").style.display = "block";
        document.getElementById("btnTabLogin").classList.remove("active");
        document.getElementById("btnTabReg").classList.add("active");
    }
  }

  const sessaoAtiva = localStorage.getItem("sessao_usuario");
  if(sessaoAtiva) { irParaJogo(); } else { document.getElementById("telaAcesso").style.display = "block"; }

  function salvarCadastro() {
    const nome = document.getElementById("regNome").value;
    const email = document.getElementById("regEmail").value;
    if(!nome || !email) return alert("Preencha Nome e E-mail!");
    
    // VERIFICA SE FOI INDICADO
    const urlParams = new URLSearchParams(window.location.search);
    const indicadoPor = urlParams.get('ref');
    if(indicadoPor) {
        alert("Parab√©ns! Voc√™ foi indicado por " + indicadoPor);
        // Aqui simulamos que quem indicou ganharia os pontos (no banco de dados real isso seria autom√°tico)
    }

    const dadosUser = { nome: nome, email: email };
    localStorage.setItem("conta_registrada", JSON.stringify(dadosUser));
    localStorage.setItem("sessao_usuario", nome);
    document.getElementById("telaAcesso").style.display = "none";
    document.getElementById("telaRegulamento").style.display = "block";
  }

  function realizarLogin() {
    const email = document.getElementById("loginEmail").value;
    const conta = JSON.parse(localStorage.getItem("conta_registrada"));
    if(conta && conta.email === email) {
        localStorage.setItem("sessao_usuario", conta.nome);
        irParaJogo();
    } else { alert("E-mail n√£o encontrado!"); }
  }

  function irParaJogo() {
    document.getElementById("telaAcesso").style.display = "none";
    document.getElementById("telaRegulamento").style.display = "none";
    document.getElementById("telaJogo").style.display = "block";
    document.getElementById("nomeUser").innerText = localStorage.getItem("sessao_usuario");
    document.getElementById("saldoUser").innerText = saldo;
    render();
  }

  function gerarLinkAfiliado() {
    const nome = localStorage.getItem("sessao_usuario");
    const linkBase = window.location.href.split('?')[0];
    const linkFinal = `${linkBase}?ref=${encodeURIComponent(nome)}`;
    
    // Copiar para √°rea de transfer√™ncia
    const tempInput = document.createElement("input");
    document.body.appendChild(tempInput);
    tempInput.value = linkFinal;
    tempInput.select();
    document.execCommand("copy");
    document.body.removeChild(tempInput);

    // DAR OS PONTOS (Simula√ß√£o Local)
    saldo += 300;
    localStorage.setItem("saldo_pontos", saldo);
    document.getElementById("saldoUser").innerText = saldo;

    alert("LINK COPIADO!\nEnvie para um amigo. Voc√™ ganhou 300 pontos pela divulga√ß√£o!");
  }

  function render() {
    const lista = document.getElementById("listaTimes");
    lista.innerHTML = "";
    times.forEach((time, index) => {
      lista.innerHTML += `
        <div class="time">
          <h3>${time.nome}</h3>
          <p>Cotas: ${time.cotas}</p>
          <p><strong>R$${time.premio}</strong></p>
          <button onclick="comprar(${index})">JOGAR</button>
        </div>
      `;
    });
  }

 function comprar(index) {
    const t = times[index];
    const nomeUsuario = localStorage.getItem("sessao_usuario");
    const saldoAtual = localStorage.getItem("saldo_pontos") || 0;
    const dataHora = new Date().toLocaleString('pt-BR');

    // VERIFICA SE O USU√ÅRIO VEIO POR UM LINK DE AFILIADO
    const urlParams = new URLSearchParams(window.location.search);
    const indicadoPor = urlParams.get('ref') || "Ningu√©m (Direto)";

    // Montando a etiqueta com os novos dados
    const etiqueta = `üéüÔ∏è *RESERVA DE COTA* üéüÔ∏è%0A%0A` +
                     `üë§ *CLIENTE:* ${nomeUsuario}%0A` +
                     `‚öΩ *TIME:* ${t.nome}%0A` +
                     `üí∞ *VALOR:* R$ 20,00%0A` +
                     `üèÜ *SALDO PTS:* ${saldoAtual}%0A` +
                     `ü§ù *INDICADO POR:* ${indicadoPor}%0A` +
                     `üìÖ *DATA:* ${dataHora}%0A%0A` +
                     `‚ö†Ô∏è _Aguardando comprovante PIX para validar._`;

    alert(`Reserva Gerada para: ${t.nome}\nClique em OK para enviar.`);
    
    // Abre o seu Telegram com a etiqueta completa
    window.open(`https://t.me/SEU_USUARIO?text=${etiqueta}`);
  }


  function modoAdmin() {
    let senha = prompt("Senha:");
    if(senha === "1234") {
      let idx = prompt("Time (1-30):");
      let v = prompt("Cotas:");
      if(idx && v) {
        times[parseInt(idx)-1].cotas = parseInt(v);
        render();
      }
    }
  }

  function logout() { localStorage.removeItem("sessao_usuario"); location.reload(); }
</script>
</body>
</html>

